{% extends "base.html" %}

{% block title %}Home{% endblock %}
{% block content %}
    <script>
        async function submitForm(event) {
            event.preventDefault();

            const Title = document.getElementById('Title').value;
            const Author = document.getElementById('Author').value;

            const response = await fetch('api/books', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({Title, Author}),
            });

            const result = await response.json();
            if (response.ok) {
                alert('Book added successfully.');
            } else {
                alert(`Error: ${result.error}`);
            }
        }
    </script>
    <h1>Books</h1>
    <h2>Add a Book</h2>
    <form id="bookForm" onsubmit="submitForm(event)">
        <label for="title">Title:</label>
        <input type="text", id="Title", name="Title" required><br><br>
        <label for="author">Author:</label>
        <input type="text", id="Author", name="Author" required><br><br>

        <button type="submit">Add Book</button>
    </form>
    <table class="table table-striped">
    <thead>
    <tr>
        <th>Title</th>
        <th>Author</th>
        <th>Genre</th>
        <th>Height</th>
        <th>Publisher</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    {% for book in books %}
        <tr>
            <td>{{ book.Title }}</td>
            <td>{{ book.Author }}</td>
            <td>{{ book.Genre }}</td>
            <td>{{ book.Height }}</td>
            <td>{{ book.Publisher }}</td>
        </tr>
    {% endfor %}
    </tbody>
    </table>
{% endblock %}